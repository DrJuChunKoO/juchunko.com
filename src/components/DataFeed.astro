---
import { ArrowRight } from "lucide-react";

export interface Props {
	variant?: "card" | "page";
	title: string;
	subtitle: string;
	viewMoreLink?: string;
	fetchError: boolean;
	hasData: boolean;
	emptyMessage: string;
	fetchErrorMessage: string;
}

const { variant = "card", title, subtitle, viewMoreLink, fetchError, hasData, emptyMessage, fetchErrorMessage } = Astro.props;

const isCard = variant === "card";
---

<section>
	{
		isCard && (
			<a
				class="group relative block overflow-hidden rounded-lg bg-gray-50 transition-colors hover:bg-gray-100 dark:bg-white/5 dark:hover:bg-white/10"
				href={viewMoreLink}
			>
				{fetchError ? (
					<p class="mt-6 rounded-lg border border-red-300 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-800 dark:bg-red-900/30 dark:text-red-200">
						{fetchErrorMessage}
					</p>
				) : !hasData ? (
					<p class="mt-6 rounded-lg border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600 dark:border-slate-700 dark:bg-slate-800/60 dark:text-slate-300">
						{emptyMessage}
					</p>
				) : (
					<slot name="card" />
				)}
				<div class="absolute bottom-0 left-0 z-10 flex w-full items-center justify-between gap-2 bg-black/2.5 p-4 py-3 backdrop-blur-xs md:p-6 md:py-4 dark:bg-white/5">
					<header>
						<h2 class="font-semibold text-slate-900 md:text-xl dark:text-white">{title}</h2>
						<p class="text-xs text-slate-600 md:text-sm dark:text-white/50">{subtitle}</p>
					</header>
					<ArrowRight className="size-5 text-gray-600 dark:text-white/80 transition-transform group-hover:translate-x-1" />
				</div>
			</a>
		)
	}{
		!isCard &&
			(fetchError ? (
				<p class="mt-6 rounded-lg border border-red-300 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-800 dark:bg-red-900/30 dark:text-red-200">
					{fetchErrorMessage}
				</p>
			) : !hasData ? (
				<p class="mt-6 rounded-lg border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600 dark:border-slate-700 dark:bg-slate-800/60 dark:text-slate-300">
					{emptyMessage}
				</p>
			) : (
				<slot name="page" />
			))
	}
</section>
